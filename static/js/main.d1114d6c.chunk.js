(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{23:function(e,t,a){e.exports=a.p+"static/media/wallet.44103b8a.png"},39:function(e,t,a){e.exports=a(60)},48:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(22),i=a.n(c),l=a(10),o=a(26),s=a(4),u=(a(48),a(17)),m=a(8),d=a(9),p=a(12),b=a(11),h=a(15),E=a.n(h),g=a(21),v=a(3),y=function(){var e=Object(g.a)(E.a.mark((function e(){var t,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(e){return{type:"CURR_REQ_SUCCESS",currencies:e}},C=function(e){return{type:"CURR_REQ_FAILURE",error:e}},R=function(e,t){return{type:"SAVE_EXPENSE",expense:Object(v.a)(Object(v.a)({},e),{},{exchangeRates:t})}};var j=a(23),O=a.n(j),x=(a(50),function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleSubmit=function(e){e.preventDefault();var t=n.state.email,a=n.props,r=a.history,c=a.getEmail;localStorage.setItem("trybewallet-user",t),c(t),r.push("/carteira")},n.handleChange=function(e){var t=e.target,a=t.value,r=t.type;n.setState(Object(u.a)({},r,a),n.loginValidation)},n.loginValidation=function(){var e=n.state,t=e.email;e.password.length>=6&&t.match(/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/)?n.setState({isDisabled:!1}):n.setState({isDisabled:!0})},n.state={email:"",password:"",isDisabled:!0},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.isDisabled;return r.a.createElement("div",{className:"login-page"},r.a.createElement("p",null,r.a.createElement("img",{src:O.a,alt:"Imagem carteira",width:"50px"}),r.a.createElement("h1",null,"TrybeWallet")),r.a.createElement("div",{className:"login-box"},r.a.createElement("h2",null,"Login"),r.a.createElement("form",{className:"login-form",onSubmit:this.handleSubmit},r.a.createElement("input",{"data-testid":"email-input",type:"email",placeholder:"E-mail",value:t,onChange:this.handleChange}),r.a.createElement("input",{"data-testid":"password-input",type:"password",placeholder:"Senha",value:a,onChange:this.handleChange}),r.a.createElement("button",{type:"submit",disabled:n},"Entrar"))),r.a.createElement("p",null))}}]),a}(r.a.Component)),D=Object(l.b)(null,(function(e){return{getEmail:function(t){return e(function(e){return{type:"LOGIN",email:e}}(t))}}}))(x),w=a(19),S=["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito","PIX"],L=["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"],N=["Descri\xe7\xe3o","Tag","M\xe9todo de pagamento","Valor","Moeda","C\xe2mbio utilizado","Valor convertido","Moeda de convers\xe3o","Editar/Excluir"],k={value:"",description:"",currency:"USD",method:S[0],tag:L[0],btnLabel:"Adicionar despesa",editId:"",btnDisabled:!0},B=[{currency:"Argentina Peso",abbreviation:"ARS",symbol:"$"},{currency:"Australia Dollar",abbreviation:"AUD",symbol:"$"},{currency:"Brazil Real",abbreviation:"BRL",symbol:"R$"},{currency:"Canada Dollar",abbreviation:"CAD",symbol:"$"},{currency:"China Yuan Renminbi",abbreviation:"CNY",symbol:"\xa5"},{currency:"Euro Member Countries",abbreviation:"EUR",symbol:"\u20ac"},{currency:"Israel Shekel",abbreviation:"ILS",symbol:"\u20aa"},{currency:"Japan Yen",abbreviation:"JPY",symbol:"\xa5"},{currency:"Switzerland Franc",abbreviation:"CHF",symbol:"CHF"},{currency:"United Kingdom Pound",abbreviation:"GBP",symbol:"\xa3"},{currency:"United States Dollar",abbreviation:"USD",symbol:"$"}].reduce((function(e,t){return e[t.abbreviation]=t.symbol,e}),{}),F=Object(v.a)(Object(v.a)({},B),{},{LTC:"\u0141",BTC:"\u20bf",ETH:"\u039e",XRP:"XRP",DOGE:"\xd0"}),A=(a(51),function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.description,n=e.currency,c=e.btnDisabled,i=e.method,l=e.tag,o=e.btnLabel,s=e.currencies,u=e.handleSubmit,m=e.handleChange,d=[].concat(Object(w.a)(s),["BRL"]);return r.a.createElement("form",{onSubmit:u,className:"expenses-form"},r.a.createElement("label",{htmlFor:"value",className:"value-label"},"Valor",r.a.createElement("input",{"data-testid":"value-input",type:"number",name:"value",value:t,placeholder:"Valor",onChange:m,className:"value-input"})),r.a.createElement("label",{htmlFor:"description",className:"description-label"},"Descri\xe7\xe3o",r.a.createElement("input",{"data-testid":"description-input",type:"text",name:"description",value:a,placeholder:"Descri\xe7\xe3o",onChange:m})),r.a.createElement("label",{htmlFor:"currency",className:"currency-label"},"Moeda",r.a.createElement("select",{name:"currency",id:"currency",value:n,onChange:m,"data-testid":"currency-input"},d.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("label",{htmlFor:"method",className:"method-label"},"M\xe9todo de Pagamento",r.a.createElement("select",{name:"method",id:"method",value:i,onChange:m,"data-testid":"method-input"},S.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("label",{htmlFor:"tag",className:"tag-label"},"Tipo de Despesa",r.a.createElement("select",{name:"tag",id:"tag",value:l,onChange:m,"data-testid":"tag-input"},L.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("button",{type:"submit",disabled:c},o))}}]),a}(r.a.Component)),I=Object(l.b)((function(e){return{currencies:e.wallet.currencies}}))(A),U=a(18),_=a(34),T=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement("footer",null,r.a.createElement("div",{className:"icons"},r.a.createElement("a",{href:"https://github.com/lalanametala",target:"_blank",rel:"noreferrer"},r.a.createElement(U.b,{className:"sm-icons"})),r.a.createElement("a",{href:"https://www.linkedin.com/in/la%C3%ADs-nametala/",target:"_blank",rel:"noreferrer"},r.a.createElement(_.a,{className:"sm-icons"}))),r.a.createElement("p",null,"Desenvolvido por La\xeds Nametala"))}}]),a}(r.a.Component),P=a(35),V=a(36),H=a(24),G=(a(52),function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target.value;(0,n.props.changeCurr)(t),n.setState({heaCurr:t})},n.logout=function(){localStorage.removeItem("trybewallet-user"),n.props.history.push("/")},n.state={heaCurr:"BRL"},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.email,a=e.totalExp,n=e.currencies,c=e.headerCurrency,i=this.state.heaCurr,l=[].concat(Object(w.a)(n),["BRL"]);return r.a.createElement("header",null,r.a.createElement("div",{className:"title-logo"},r.a.createElement("img",{src:O.a,alt:"Imagem carteira",width:"40px",height:"40px"}),r.a.createElement("h3",null,"TrybeWallet")),r.a.createElement("div",{className:"header-info"},r.a.createElement("p",{"data-testid":"email-field",className:"user-info"},r.a.createElement(P.a,{className:"user-icon"}),t),r.a.createElement("p",{className:"total-field"},r.a.createElement(V.a,null),"  ",r.a.createElement("p",null,F[c],r.a.createElement("span",{"data-testid":"total-field"},a))),r.a.createElement("div",{className:"currency-choice"},r.a.createElement(U.c,{className:"curr-icon"}),r.a.createElement("select",{"data-testid":"header-currency-field",name:"header-currency",id:"header-currency",value:i,onChange:this.handleChange},l.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("button",{className:"logout",onClick:this.logout,type:"button",title:"Logout"},r.a.createElement(H.a,{className:"logout-icon"}))))}}]),a}(r.a.Component)),M=Object(l.b)((function(e){return{headerCurrency:e.wallet.headerCurrency}}),(function(e){return{changeCurr:function(t){return e({type:"CHANGE_HEADER_CURR",headerCurrency:t})}}}))(G),Q=(a(53),function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).isBRL=function(e,t){return"BRL"===e.currency?1:Number(t.ask)},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.expenses,n=t.handleEdit,c=t.handleDelete,i=t.headerCurrency;return r.a.createElement("table",null,r.a.createElement("h3",null,"Despesas"),r.a.createElement("thead",null,N.map((function(e){return r.a.createElement("th",{name:e,key:e},e)}))),a.map((function(t,a){return r.a.createElement("tbody",{key:a},r.a.createElement("tr",null,r.a.createElement("td",{"data-th":N[0]},t.description),r.a.createElement("td",{"data-th":N[1]},t.tag),r.a.createElement("td",{"data-th":N[2]},t.method),r.a.createElement("td",{"data-th":N[3]},"".concat(F[t.currency]).concat(Number(t.value).toLocaleString("pt-BR",{maximumFractionDigits:2,minimumFractionDigits:2}))),r.a.createElement("td",{"data-th":N[4]},"BRL"===i?"Real":t.exchangeRates[i].name.split("/")[0]),r.a.createElement("td",{"data-th":N[5]},F[i],"BRL"===i?e.isBRL(t,t.exchangeRates[t.currency]).toLocaleString("pt-BR",{maximumFractionDigits:2,minimumFractionDigits:2}):(e.isBRL(t,t.exchangeRates[t.currency])/+t.exchangeRates[i].ask).toLocaleString("pt-BR",{maximumFractionDigits:2,minimumFractionDigits:2})),r.a.createElement("td",{"data-th":N[6]},F[i],"BRL"===i?(+t.value*e.isBRL(t,t.exchangeRates[t.currency])).toLocaleString("pt-BR",{maximumFractionDigits:2,minimumFractionDigits:2}):(+t.value*e.isBRL(t,t.exchangeRates[t.currency])/+t.exchangeRates[i].ask).toLocaleString("pt-BR",{maximumFractionDigits:2,minimumFractionDigits:2})),r.a.createElement("td",{"data-th":N[7]},"BRL"===t.currency?"Real":t.exchangeRates[t.currency].name.split("/")[0]),r.a.createElement("td",{className:"buttons"},r.a.createElement("button",{type:"button","data-testid":"edit-btn",className:"edit-btn",id:t.id,onClick:n},r.a.createElement(U.a,null)),r.a.createElement("button",{type:"button","data-testid":"delete-btn",className:"delete-btn",id:t.id,onClick:c},r.a.createElement(H.b,null)))))})))}}]),a}(r.a.Component)),$=Object(l.b)((function(e){return{expenses:e.wallet.expenses,headerCurrency:e.wallet.headerCurrency}}))(Q),W=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleChange=function(e){var t=e.target,a=t.value,r=t.name;n.setState(Object(u.a)({},r,a),n.formValidation)},n.formValidation=function(){var e=n.state,t=e.value,a=e.description;t>0&&a.length>2?n.setState({btnDisabled:!1}):n.setState({btnDisabled:!0})},n.handleSubmit=function(e){e.preventDefault();var t=n.props,a=t.sendExpense,r=t.expenses,c=t.editExpenses,i=n.state,l=i.btnLabel,o=i.editId,s=i.value,u=i.description,m=i.currency,d=i.method,p=i.tag;"Adicionar despesa"===l?a({value:s,description:u,currency:m,method:d,tag:p}):c(r.map((function(e){return e.id===+o?Object(v.a)(Object(v.a)({},e),{},{value:s,description:u,currency:m,method:d,tag:p,id:e.id}):e})));n.setState(k)},n.calculateTotal=function(){var e=n.props,t=e.expenses,a=e.headerCurrency,r=t.reduce((function(e,t){return e+ +t.value*+t.exchangeRates[t.currency].ask}),0);return"BRL"!==a&&t.length?(+r/+t[0].exchangeRates[a].ask).toLocaleString("pt-BR",{maximumFractionDigits:2,minimumFractionDigits:2}):r.toLocaleString("pt-BR",{maximumFractionDigits:2,minimumFractionDigits:2})},n.handleDelete=function(e){var t=e.target.id,a=n.props,r=a.expenses;(0,a.editExpenses)(r.filter((function(e){return e.id!==+t}))),n.setState(k)},n.handleEdit=function(e){var t=e.target.id,a=n.props.expenses.find((function(e){return e.id===+t})),r=a.value,c=a.description,i=a.currency,l=a.method,o=a.tag;n.setState({value:r,description:c,currency:i,method:l,tag:o,btnLabel:"Editar despesa",editId:t})},n.state=k,n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.getCurrencies)()}},{key:"render",value:function(){var e=this.props,t=e.email,a=e.currencies,n=e.history,c=this.state,i=c.value,l=c.description,o=c.currency,s=c.method,u=c.tag,m=c.btnLabel,d=c.btnDisabled;return r.a.createElement(r.a.Fragment,null,r.a.createElement(M,{email:t,totalExp:this.calculateTotal(),currencies:a,history:n}),r.a.createElement(I,{value:i,description:l,currency:o,method:s,tag:u,btnLabel:m,btnDisabled:d,currencies:a,handleSubmit:this.handleSubmit,handleChange:this.handleChange}),r.a.createElement($,{handleEdit:this.handleEdit,handleDelete:this.handleDelete}),r.a.createElement(T,null))}}]),a}(r.a.Component),X=Object(l.b)((function(e){return{email:e.user.email,currencies:e.wallet.currencies,expenses:e.wallet.expenses,headerCurrency:e.wallet.headerCurrency}}),(function(e){return{getCurrencies:function(){return e(function(){var e=Object(g.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"REQUIRE"}),e.prev=1,e.next=4,y();case 4:a=e.sent,n=Object.keys(a).filter((function(e){return"USDT"!==e})),t(f(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t(C(e.t0));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())},sendExpense:function(t){return e(function(e){return function(){var t=Object(g.a)(E.a.mark((function t(a){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"REQUIRE"}),t.prev=1,t.next=4,y();case 4:n=t.sent,a(R(e,n)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a(C(t.t0));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))},editExpenses:function(t){return e(function(e){return{type:"CHANGE",expenses:e}}(t))}}}))(W);var z=function(){var e=localStorage.getItem("trybewallet-user");return r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/carteira",component:X}),r.a.createElement(s.b,{exact:!0,path:"/",render:function(t){return e?r.a.createElement(s.a,{to:"/carteira"}):r.a.createElement(D,t)}}))};a(59),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=a(14),Y=a(37),K=a(38),q={email:localStorage.getItem("trybewallet-user")||""},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(v.a)(Object(v.a)({},e),{},{email:t.email});default:return e}},ee={currencies:[],expenses:[],headerCurrency:"BRL"},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REQUIRE":return Object(v.a)({},e);case"CURR_REQ_SUCCESS":return Object(v.a)(Object(v.a)({},e),{},{currencies:t.currencies});case"CURR_REQ_FAILURE":return Object(v.a)(Object(v.a)({},e),{},{error:t.error});case"SAVE_EXPENSE":var a=e.expenses.length,n=Object(v.a)(Object(v.a)({},t.expense),{},{id:a||0});return Object(v.a)(Object(v.a)({},e),{},{expenses:[].concat(Object(w.a)(e.expenses),[n])});case"CHANGE":return Object(v.a)(Object(v.a)({},e),{},{expenses:t.expenses});case"CHANGE_HEADER_CURR":return Object(v.a)(Object(v.a)({},e),{},{headerCurrency:t.headerCurrency});default:return e}},ae=Object(J.combineReducers)({user:Z,wallet:te}),ne=Object(J.createStore)(ae,Object(Y.composeWithDevTools)(Object(J.applyMiddleware)(K.a)));i.a.render(r.a.createElement(o.a,null,r.a.createElement(l.a,{store:ne},r.a.createElement(z,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.d1114d6c.chunk.js.map